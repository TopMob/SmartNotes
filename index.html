<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Smart Notes</title> <link rel="stylesheet" href="style.css" />
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>
<body>

    <div id="login-screen" class="auth-container">
        <div class="auth-box">
            <div class="logo-large">Smart Notes</div>
            <p class="auth-subtitle">Твои мысли. Твой порядок.</p>
            <button onclick="login()" class="btn-google">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" alt="G" />
                <span>Войти через Google</span>
            </button>
        </div>
    </div>

    <div id="app-content" class="hidden">
        
        <header class="top-bar">
            <div class="header-left">
                <div class="app-logo">Smart Notes</div>
            </div>
            
            <div class="header-center">
                <div class="search-wrapper">
                    <span class="material-icons-round search-icon">search</span>
                    <input type="text" id="search-input" placeholder="Поиск (текст, #теги)..." />
                </div>
            </div>

            <div class="header-right">
                <button class="icon-btn" onclick="openSettings()" title="Настройки">
                    <span class="material-icons-round">settings</span>
                </button>
                
                <div class="profile-wrapper">
                    <img id="user-avatar" src="" alt="User" onclick="toggleProfileMenu()" />
                    <div id="profile-menu" class="dropdown-menu hidden">
                        <div class="user-info">
                            <span id="user-name">Имя</span>
                            <span id="user-email">email@example.com</span>
                        </div>
                        <div class="menu-divider"></div>
                        <button onclick="requestSwitchAccount()" class="menu-item">
                            <span class="material-icons-round">switch_account</span> Сменить аккаунт
                        </button>
                        <button onclick="requestLogout()" class="menu-item danger">
                            <span class="material-icons-round">logout</span> Выйти из аккаунта
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-layout">
            
            <aside id="left-menu" class="sidebar">
                <div class="menu-header">
                    <button class="icon-btn menu-toggle" onclick="toggleLeftMenu()">
                        <span class="material-icons-round">menu_open</span>
                    </button>
                </div>

                <nav class="nav-list">
                    <button onclick="switchView('notes')" class="nav-item active" id="nav-notes">
                        <span class="material-icons-round">notes</span>
                        <span>Все заметки</span>
                    </button>
                    <button onclick="switchView('archive')" class="nav-item" id="nav-archive">
                        <span class="material-icons-round">archive</span>
                        <span>Архив</span>
                    </button>
                </nav>

                <div class="folders-section">
                    <div class="folders-header">
                        <span>ПАПКИ</span>
                        <button onclick="openFolderModal()" class="icon-btn-small">
                            <span class="material-icons-round">add</span>
                        </button>
                    </div>
                    <div id="folder-list" class="folder-list-container">
                        </div>
                </div>

                <div class="sidebar-footer">
                    <button onclick="openFeedback()" class="nav-item feedback-link">
                        <span class="material-icons-round">chat_bubble_outline</span>
                        <span>Обратная связь</span>
                    </button>
                </div>
            </aside>

            <main id="notes-container" class="notes-grid">
                </main>
        </div>

        <button class="fab-add" onclick="createNote()">
            <span class="material-icons-round">add</span>
        </button>
    </div>

    <div id="editor-modal" class="modal-overlay hidden">
        <div class="modal-content editor-window">
            
            <div class="editor-header">
                <button onclick="closeEditor()" class="icon-btn close-editor-btn">
                    <span class="material-icons-round">arrow_back</span>
                </button>
                
                <span id="last-edited" class="meta-text">Ред. только что</span>
                
                <div class="editor-actions-top">
                    <button id="priority-btn" onclick="cyclePriority()" class="icon-btn" title="Приоритет">
                        <span class="material-icons-round">flag</span>
                    </button>
                    <button id="pin-btn" onclick="togglePin()" class="icon-btn" title="Закрепить">
                        <span class="material-icons-round">push_pin</span>
                    </button>
                </div>
            </div>

            <div class="editor-body">
                <input type="text" id="note-title" placeholder="Заголовок" autocomplete="off" />
                <textarea id="note-content" placeholder="Начните писать..."></textarea>
            </div>

            <div class="editor-footer">
                <div class="tags-input-wrapper">
                    <span class="material-icons-round">tag</span>
                    <input type="text" id="note-tags" placeholder="Теги (через пробел)" />
                </div>
                
                <div class="editor-tools">
                    <button onclick="insertCurrentTime()" class="tool-btn" title="Вставить время">
                        <span class="material-icons-round">schedule</span>
                    </button>
                    
                    <div class="spacer"></div>
                    
                    <button onclick="toggleArchive()" class="tool-btn warning" title="В архив">
                        <span class="material-icons-round">archive</span>
                    </button>
                    <button onclick="deleteNoteWrapper()" class="tool-btn danger" title="Удалить">
                        <span class="material-icons-round">delete</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Настройки</h3>
                <button onclick="closeSettings()" class="close-cross">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            
            <div class="settings-body">
                <div class="setting-group">
                    <label>Язык / Language</label>
                    <div class="toggle-switch-lang">
                        <button id="lang-ru" onclick="setLanguage('ru')" class="active">RU</button>
                        <button id="lang-en" onclick="setLanguage('en')">EN</button>
                    </div>
                </div>

                <div class="setting-group">
                    <label>Тема оформления</label>
                    <div class="presets-row">
                        <button onclick="applyPreset('dark')" class="preset-btn" style="background:#0a0a0a; border:1px solid #333"></button>
                        <button onclick="applyPreset('midnight')" class="preset-btn" style="background:#0f172a; border:1px solid #1e293b"></button>
                        <button onclick="applyPreset('forest')" class="preset-btn" style="background:#051a10; border:1px solid #0f3d24"></button>
                    </div>
                    
                    <div class="color-picker-row">
                        <div class="cp-item">
                            <span>Акцент</span>
                            <input type="color" id="color-accent" onchange="updateCustomTheme()" />
                        </div>
                        <div class="cp-item">
                            <span>Фон</span>
                            <input type="color" id="color-bg" onchange="updateCustomTheme()" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="folder-modal" class="modal-overlay hidden">
        <div class="modal-card small">
            <h3>Новая папка</h3>
            <input type="text" id="new-folder-name" class="modal-input" placeholder="Название папки" />
            
            <div class="folder-color-selector">
                <span>Цвет категории:</span>
                <input type="color" id="new-folder-color" value="#00ffcc" />
            </div>

            <div class="modal-actions">
                <button onclick="closeFolderModal()" class="btn-text">Отмена</button>
                <button onclick="confirmCreateFolder()" class="btn-primary">Создать</button>
            </div>
        </div>
    </div>

    <div id="confirm-modal" class="modal-overlay hidden">
        <div class="modal-card small">
            <h3 id="confirm-title">Вы уверены?</h3>
            <p id="confirm-text">Действие нельзя отменить.</p>
            <div class="modal-actions">
                <button onclick="closeConfirmModal()" class="btn-text">Отмена</button>
                <button id="confirm-action-btn" class="btn-danger">Да, выйти</button>
            </div>
        </div>
    </div>

    <div id="feedback-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <div class="modal-header">
                <h3>Обратная связь</h3>
                <button onclick="closeFeedback()" class="close-cross">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            
            <div class="feedback-content">
                <div class="team-block">
                    <h4>Наша команда:</h4>
                    <ul>
                        <li>Малышев Егор</li>
                        <li>Александров Арсений</li>
                        <li>Миняев Иван</li>
                        <li>Копаев Иван</li>
                    </ul>
                </div>

                <div class="bot-link-block">
                    <p>Связаться с нами:</p>
                    <a href="https://t.me/SmartNotesInfo_bot" target="_blank" class="tg-link">
                        @SmartNotesInfo_bot
                    </a>
                </div>

                <hr class="divider">

                <div class="rating-block">
                    <p>Оцените приложение:</p>
                    <div class="star-rating" id="star-rating">
                        <span data-value="1">★</span>
                        <span data-value="2">★</span>
                        <span data-value="3">★</span>
                        <span data-value="4">★</span>
                        <span data-value="5">★</span>
                    </div>
                </div>

                <textarea id="feedback-text" placeholder="Ваши предложения или критика..." rows="4"></textarea>
                
                <button onclick="submitFeedback()" class="btn-primary full-width">Отправить</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
