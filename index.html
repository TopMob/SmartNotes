<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Smart Notes</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

    <header class="header">
        <div class="header__left">
            <div class="header__logo" data-lang="app_title">Smart Notes</div>
            <span class="header__version"></span>
        </div>
        <div class="header__actions">
            <button class="icon-btn" onclick="toggleModal('settings-modal', true)" title="Settings">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
            <button class="icon-btn" onclick="toggleModal('info-modal', true)" title="Info">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            </button>
            
            <button id="login-btn" class="btn btn--primary btn--sm" onclick="login()" data-lang="login_btn">LOGIN</button>
            
            <div id="user-ui" class="hidden user-badge" onclick="toggleModal('profile-modal', true)">
                <img id="user-pic" class="avatar">
            </div>
        </div>
    </header>

    <div id="app-content" class="container hidden">
        
        <div class="controls-wrapper">
            <div class="search-box">
                <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input type="text" id="search" class="search-input" placeholder="–ü–æ–∏—Å–∫..." oninput="renderNotes()">
            </div>
            
            <div class="filters">
                <button class="icon-btn filter-btn" onclick="toggleSortMenu()" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                </button>
                <select id="category-filter" class="filter-select" onchange="renderNotes()">
                    <option value="all" data-lang="filter_all">–í—Å–µ</option>
                    <option value="pinned" data-lang="filter_pinned">üìå –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ</option>
                    <option value="high" data-lang="filter_high">üî• –í–∞–∂–Ω—ã–µ</option>
                    <option value="archived" data-lang="filter_archived">üì¶ –ê—Ä—Ö–∏–≤</option>
                </select>
            </div>
        </div>
        
        <main id="notesList" class="notes-grid"></main>
        
        <button class="fab" onclick="openEditor()">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
        </button>
    </div>

    <div id="settings-modal" class="modal" onclick="closeAll(event)">
        <div class="modal-card settings-card">
            <h3 data-lang="settings_title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            
            <div class="settings-tabs">
                <button class="tab-btn active" onclick="switchTab('general')" data-lang="tab_general">–û–±—â–∏–µ</button>
                <button class="tab-btn" onclick="switchTab('appearance')" data-lang="tab_appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</button>
            </div>

            <div id="tab-general" class="tab-content active">
                <div class="setting-group">
                    <label data-lang="lang_label">–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                    <div class="lang-switch">
                        <button class="lang-btn" id="btn-ru" onclick="setLangPreview('ru')">–†—É—Å—Å–∫–∏–π</button>
                        <button class="lang-btn" id="btn-en" onclick="setLangPreview('en')">English</button>
                    </div>
                </div>
            </div>

            <div id="tab-appearance" class="tab-content">
                
                <div class="setting-group">
                    <label data-lang="color_spectrum">–û—Å–Ω–æ–≤–Ω–æ–π –æ—Ç—Ç–µ–Ω–æ–∫</label>
                    <div class="spectrum-slider-container">
                        <input type="range" min="0" max="360" value="160" class="hue-slider" id="main-hue-slider" oninput="updateColorPreview(this.value)">
                    </div>
                </div>

                <div class="setting-group">
                    <label data-lang="color_presets">–≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                    <div class="theme-toggles">
                        <div class="theme-option">
                            <span data-lang="bg_color">–§–æ–Ω</span>
                            <input type="color" id="bg-color-picker" value="#000000">
                        </div>
                        <div class="theme-option">
                            <span data-lang="text_color">–¢–µ–∫—Å—Ç</span>
                            <input type="color" id="text-color-picker" value="#ffffff">
                        </div>
                        <div class="theme-option">
                            <span data-lang="accent_color">–ê–∫—Ü–µ–Ω—Ç</span>
                            <input type="color" id="accent-color-picker" value="#00ffcc">
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-footer">
                <button class="btn btn--text" onclick="resetSettings()" data-lang="reset">–°–±—Ä–æ—Å</button>
                <div class="action-buttons">
                    <button class="btn btn--secondary" onclick="cancelSettings()" data-lang="cancel">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn--primary" onclick="applySettings()" data-lang="apply">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div id="info-modal" class="modal" onclick="closeAll(event)">
        <div class="modal-card">
            <h3 class="brand-title">SMART NOTES <span class="pro-badge">PRO</span></h3>
            
            <div class="team-section">
                <p class="section-label" data-lang="creators_label">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏</p>
                <div class="team-list">
                    <div class="team-member">–ö–æ–ø–∞–µ–≤ –ò–≤–∞–Ω</div>
                    <div class="team-member">–ú–∏–Ω—è–µ–≤ –ò–≤–∞–Ω</div>
                    <div class="team-member">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤ –ê—Ä—Å–µ–Ω–∏–π</div>
                    <div class="team-member">–ú–∞–ª—ã—à–µ–≤ –ï–≥–æ—Ä</div>
                </div>
            </div>

            <div class="feedback-section">
                <p data-lang="feedback_text">–ï—Å—Ç—å –∏–¥–µ—è –∏–ª–∏ –Ω–∞—à–ª–∏ –±–∞–≥?</p>
                <a href="https://t.me/SmartNotesInfo_bot" target="_blank" class="btn btn--feedback">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                    <span data-lang="contact_us">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</span>
                </a>
            </div>
            
            <button class="btn btn--secondary mt-4" onclick="toggleModal('info-modal', false)" data-lang="close">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="profile-modal" class="modal" onclick="closeAll(event)">
        <div class="modal-card">
            <img id="modal-user-pic" class="avatar avatar--lg">
            <h4 id="user-name" class="user-name">User Name</h4>
            <div class="profile-stats">
                <div class="stat"><span id="note-count">0</span> <small data-lang="notes_stat">Notes</small></div>
            </div>
            <button class="btn btn--outlined" onclick="switchAccount()" data-lang="switch_acc">–°–º–µ–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
            <button class="btn btn--danger" onclick="logout()" data-lang="logout">–í—ã–π—Ç–∏</button>
        </div>
    </div>

    <div id="editor-modal" class="modal modal--full" onclick="closeAll(event)">
        <div class="editor-card">
            
            <div class="editor-header">
                <button class="icon-btn close-editor-btn" onclick="toggleEditor(false)">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
                
                <div class="editor-tools-top">
                    <select id="notePriority" class="priority-select">
                        <option value="low">Low</option>
                        <option value="normal" selected>Normal</option>
                        <option value="high">High üî•</option>
                    </select>

                    <button id="btn-pin" class="icon-btn tool-btn" onclick="togglePin()" title="–ó–∞–∫—Ä–µ–ø–∏—Ç—å">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2s-1.05.22-1.41.59l-9 9c-.37.36-.59.86-.59 1.41s.22 1.05.59 1.41l9 9c.36.37.86.59 1.41.59s1.05-.22 1.41-.59l9-9c.37-.36.59-.86.59-1.41s-.22-1.05-.59-1.41z"></path></svg>
                    </button>
                </div>
            </div>

            <div class="editor-body">
                <input type="text" id="noteTitle" class="editor-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫..." data-lang="placeholder_title">
                <textarea id="noteText" class="editor-textarea" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å..." data-lang="placeholder_text"></textarea>
            </div>

            <div class="editor-footer">
                
                <div class="editor-options">
                    <label class="toggle-switch">
                        <input type="checkbox" id="noteTimestamp" checked>
                        <span class="toggle-label" data-lang="label_time">–í—Ä–µ–º—è</span>
                    </label>
                    
                    <label class="toggle-switch">
                        <input type="checkbox" id="noteArchive">
                        <span class="toggle-label" data-lang="label_archive">–í –∞—Ä—Ö–∏–≤</span>
                    </label>
                </div>

                <div class="tag-input-wrapper">
                    <span class="tag-icon">#</span>
                    <input type="text" id="noteTags" class="tag-input" placeholder="—Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª" data-lang="placeholder_tags">
                </div>

                <button class="btn-send-lg" onclick="addNote()">
                    <span data-lang="save_btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>