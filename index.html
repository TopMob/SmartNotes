<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="SmartNotes - Ваши умные заметки с синхронизацией и ИИ">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>SmartNotes</title>

    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="Logo.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=JetBrains+Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js" defer></script>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>

    <script src="js/state.js" defer></script>
    <script src="js/stateActions.js" defer></script>
    <script src="js/lang.js" type="module"></script>
    <script src="js/theme.js" type="module"></script>
    <script src="js/core.js" type="module"></script>
    <script src="js/services.js" defer></script>
    <script src="js/sync.js" defer></script>
    <script src="js/ui.js" defer></script>
    <script src="js/notes.js" defer></script>
    <script src="js/editor.js" defer></script>
</head>

<body>
    <div class="bg-wrapper" aria-hidden="true"></div>

    <div id="login-screen" class="modal-overlay active" role="dialog" aria-modal="true" aria-label="Авторизация" data-lang-aria="login_aria" data-modal-static="true">
        <div class="login-box">
            <h1 class="brand-text-fixed">SmartNotes</h1>
            <p class="subtext" data-lang="login">Вход в систему</p>
            <div class="auth-buttons-group">
                <button type="button" class="btn-auth google" data-action="login">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="" width="20" height="20">
                    <span data-lang="login_google">Войти через Google</span>
                </button>
            </div>
        </div>
    </div>

    <div id="app" class="app-layout" aria-hidden="false">
        <aside id="sidebar" class="sidebar-glass" aria-label="Навигация" data-lang-aria="nav_aria">
            <header class="sidebar-header">
                <span class="brand-text-fixed">SmartNotes</span>
                <button type="button" class="btn-icon mobile-only" data-action="toggle-sidebar" data-force="false" aria-label="Закрыть меню" data-lang-aria="close_menu">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>

            <nav class="sidebar-nav scrollable" aria-label="Разделы" data-lang-aria="sections_aria">
                <div class="nav-group">
                    <button type="button" class="nav-item active" data-action="switch-view" data-view="notes">
                        <i class="material-icons-round" aria-hidden="true">description</i>
                        <span data-lang="all_notes">Все записи</span>
                    </button>

                    <button type="button" class="nav-item" data-action="switch-view" data-view="favorites">
                        <i class="material-icons-round" aria-hidden="true">star</i>
                        <span data-lang="favorites">Важное</span>
                    </button>

                    <button type="button" class="nav-item" data-action="switch-view" data-view="archive">
                        <i class="material-icons-round" aria-hidden="true">archive</i>
                        <span data-lang="archive">Архив</span>
                    </button>

                    <button type="button" class="nav-item" data-action="switch-view" data-view="folders">
                        <i class="material-icons-round" aria-hidden="true">folder</i>
                        <span data-lang="folders_overview">Папки</span>
                    </button>

                    <button type="button" class="nav-item" data-action="primary-action" data-view="primary">
                        <i class="material-icons-round" aria-hidden="true">add</i>
                        <span data-lang="create_note">Создать заметку</span>
                    </button>
                </div>

                <div class="nav-group">
                    <div class="nav-title" data-lang="folders">ПАПКИ</div>
                    <div id="folder-list-root" class="folder-list-root"></div>
                </div>

                <div class="nav-group">
                    <div class="nav-title" data-lang="smart_features">УМНЫЕ ФУНКЦИИ</div>
                    <button type="button" class="nav-item" data-action="switch-view" data-view="locked">
                        <i class="material-icons-round" aria-hidden="true">lock</i>
                        <span data-lang="lock_center">Защита заметок</span>
                    </button>
                </div>
            </nav>

            <footer class="sidebar-footer">
                <button type="button" class="footer-link" data-action="open-modal" data-modal="about-modal">
                    <i class="material-icons-round" aria-hidden="true">info</i>
                    <span data-lang="about">О нас</span>
                </button>

                <button type="button" class="footer-link" data-action="open-modal" data-modal="rate-modal">
                    <i class="material-icons-round" aria-hidden="true">thumb_up</i>
                    <span data-lang="rate">Оценить</span>
                </button>

                <button type="button" class="footer-link" data-action="open-settings">
                    <i class="material-icons-round" aria-hidden="true">settings</i>
                    <span data-lang="settings">Настройки</span>
                </button>
            </footer>
        </aside>

        <main class="main-content">
            <header class="top-bar" role="banner">
                <div class="header-left">
                    <button type="button" id="menu-toggle" class="btn-icon" data-action="toggle-sidebar" aria-label="Открыть меню" data-lang-aria="open_menu">
                        <i class="material-icons-round" aria-hidden="true">menu</i>
                    </button>
                    <h2 id="current-view-title" class="mobile-only-title">SmartNotes</h2>
                </div>

                <div class="search-container" role="search">
                    <i class="material-icons-round search-icon" aria-hidden="true">search</i>
                    <input type="text" id="search-input" placeholder="Поиск..." data-lang-placeholder="search" autocomplete="off" aria-label="Поиск заметок" data-lang-aria="search_aria">
                </div>

                <div class="header-right">
                    <button type="button" class="btn-icon" data-action="trigger-import" aria-label="Импортировать файл" data-lang-aria="import_file">
                        <i class="material-icons-round" aria-hidden="true">upload_file</i>
                    </button>

                    <div class="user-avatar-wrapper">
                        <img id="user-photo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="User" class="header-avatar" data-action="toggle-user-menu">
                        <div id="user-dropdown" class="dropdown-menu" role="menu" aria-label="Пользователь" data-lang-aria="user_menu">
                            <div class="dropdown-header">
                                <span id="user-name">.</span>
                            </div>
                            <button type="button" class="dropdown-item" data-action="switch-account">
                                <i class="material-icons-round" aria-hidden="true">switch_account</i>
                                <span data-lang="switch_acc">Сменить</span>
                            </button>
                            <button type="button" class="dropdown-item danger" data-action="logout">
                                <i class="material-icons-round" aria-hidden="true">logout</i>
                                <span data-lang="logout">Выйти</span>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <section id="notes-content-area" class="content-scrollable scrollable" aria-label="Список заметок" data-lang-aria="notes_list_aria">
                <div id="app-loader" class="loader-container hidden" aria-hidden="true">
                    <div class="spinner" aria-hidden="true"></div>
                </div>

                <div id="empty-state" class="empty-placeholder hidden" aria-live="polite">
                    <i class="material-icons-round" aria-hidden="true">note_add</i>
                    <p data-lang="empty">Здесь пока пусто</p>
                </div>

                <div id="notes-container" class="notes-grid" role="list"></div>
            </section>

            <button type="button" class="btn-fab" data-action="primary-action" aria-label="Создать заметку" data-lang-aria="create_note">
                <i class="material-icons-round" aria-hidden="true">add</i>
            </button>
        </main>
    </div>

    <div id="note-editor" class="editor-overlay" role="dialog" aria-modal="true" aria-label="Редактор" data-lang-aria="editor">
        <div class="editor-container">
            <header class="editor-header-bar">
                <button type="button" class="btn-icon" data-action="close-editor" aria-label="Назад" data-lang-aria="back">
                    <i class="material-icons-round" aria-hidden="true">arrow_back</i>
                </button>

                <div class="editor-tools" aria-label="Действия редактора" data-lang-aria="editor_actions">
                    <button type="button" class="btn-icon" data-action="editor-undo" aria-label="Отменить" data-lang-aria="undo">
                        <i class="material-icons-round" aria-hidden="true">undo</i>
                    </button>
                    <button type="button" class="btn-icon" data-action="editor-redo" aria-label="Повторить" data-lang-aria="redo">
                        <i class="material-icons-round" aria-hidden="true">redo</i>
                    </button>

                    <div class="divider-vertical" aria-hidden="true"></div>

                    <button type="button" class="btn-icon" data-action="editor-delete" aria-label="Удалить заметку" data-lang-aria="delete_note">
                        <i class="material-icons-round" aria-hidden="true">delete</i>
                    </button>

                    <button type="button" class="btn-icon" data-action="editor-voice" aria-label="Голосовая запись">
                        <i class="material-icons-round" aria-hidden="true">mic</i>
                    </button>

                    <button type="button" class="btn-icon" data-action="open-modal" data-modal="lock-modal" aria-label="Заблокировать заметку" data-lang-aria="lock_note">
                        <i class="material-icons-round" aria-hidden="true">lock</i>
                    </button>

                    <button type="button" class="btn-icon" id="toolbar-toggle" data-action="toggle-toolbar" aria-label="Скрыть панель инструментов" data-lang-aria="toolbar_hide">
                        <i class="material-icons-round" aria-hidden="true">expand_less</i>
                    </button>
                </div>
            </header>

            <div class="editor-scroll-area scrollable">
                <input id="note-title" type="text" placeholder="Заголовок" data-lang-placeholder="note_title" aria-label="Заголовок заметки" data-lang-aria="note_title_aria">

                <div id="editor-toolbar" class="editor-toolbar" role="toolbar" aria-label="Инструменты редактора" data-lang-aria="editor_toolbar"></div>

                <div id="note-content-editable" class="note-content" contenteditable="true" role="textbox" aria-multiline="true" aria-label="Текст заметки" data-lang-aria="note_body_aria"></div>

                <div class="tags-row" aria-label="Теги" data-lang-aria="tags_aria">
                    <input id="note-tags-input" type="text" placeholder="#тег (Enter)" data-lang-placeholder="note_tags" aria-label="Добавить тег" data-lang-aria="note_tags_aria" autocomplete="off">
                    <div id="note-tags-container" class="tags-container" aria-live="polite"></div>
                </div>

                <div class="editor-bottom-actions">
                    <button type="button" class="btn-secondary" data-action="open-modal" data-modal="note-actions-modal" aria-label="Действия" data-lang-aria="note_actions">
                        <i class="material-icons-round" aria-hidden="true">more_horiz</i>
                        <span data-lang="note_actions">Действия</span>
                    </button>
                    <button type="button" class="btn-primary" data-action="editor-save" aria-label="Сохранить" data-lang-aria="save_note">
                        <i class="material-icons-round" aria-hidden="true">save</i>
                        <span data-lang="save">Сохранить</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="media-context-menu" class="media-context-menu hidden" role="menu" aria-label="Меню изображения" data-lang-aria="media_menu">
        <button type="button" class="btn-icon" data-action="media-reset" aria-label="Сбросить размер" data-lang-aria="reset_media">
            <i class="material-icons-round" aria-hidden="true">aspect_ratio</i>
        </button>
        <button type="button" class="btn-icon" data-action="media-align" data-align="left" aria-label="По левому краю" data-lang-aria="align_left">
            <i class="material-icons-round" aria-hidden="true">format_align_left</i>
        </button>
        <button type="button" class="btn-icon" data-action="media-align" data-align="right" aria-label="По правому краю" data-lang-aria="align_right">
            <i class="material-icons-round" aria-hidden="true">format_align_right</i>
        </button>
        <button type="button" class="btn-icon" data-action="media-draw" aria-label="Рисовать на фото" data-lang-aria="draw_photo">
            <i class="material-icons-round" aria-hidden="true">brush</i>
        </button>
        <button type="button" class="btn-icon" data-action="media-delete" style="color:var(--danger)" aria-label="Удалить" data-lang-aria="delete">
            <i class="material-icons-round" aria-hidden="true">delete</i>
        </button>
    </div>

    <div id="confirm-modal" class="modal-overlay confirm-layer" role="dialog" aria-modal="true">
        <div class="confirm-box">
            <h3 id="confirm-title" data-lang="confirm_default">Подтвердите</h3>
            <div class="row-center">
                <button type="button" class="btn-secondary" id="confirm-cancel" data-lang="cancel">Отмена</button>
                <button type="button" class="btn-danger" id="confirm-ok" data-lang="yes">Да</button>
            </div>
        </div>
    </div>

    <div id="prompt-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card confirm-box">
            <h3 id="prompt-title" data-lang="prompt_title">Ввод</h3>
            <input type="text" id="prompt-input" class="input-area prompt-input" autocomplete="off" aria-label="Поле ввода" data-lang-aria="prompt_input">
            <div class="row-center">
                <button type="button" class="btn-secondary" id="prompt-cancel" data-lang="cancel">Отмена</button>
                <button type="button" class="btn-primary" id="prompt-ok" data-lang="ok">ОК</button>
            </div>
        </div>
    </div>

    <div id="note-actions-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="note_actions">Действия</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="note-actions-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body" id="note-actions-content"></div>
        </div>
    </div>

    <div id="share-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Поделиться заметкой" data-lang-aria="share_note">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="share_modal_title">Поделиться</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="share-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <p class="muted" data-lang="share_desc">Ссылка будет сгенерирована в JS и появится здесь</p>
                <input id="share-link" type="text" class="input-area" readonly value="">
                <div class="row-right">
                    <button type="button" class="btn-secondary" data-action="copy-share-link" data-lang="copy">Копировать</button>
                </div>
            </div>
        </div>
    </div>

    <div id="collab-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Совместное редактирование" data-lang-aria="collab_note">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="collab_title">Совместное редактирование</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="collab-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <p class="muted" data-lang="collab_desc">Одноразовая ссылка будет сгенерирована в JS и появится здесь</p>
                <input id="collab-link" type="text" class="input-area" readonly value="">
                <div class="row-right">
                    <button type="button" class="btn-secondary" data-action="copy-collab-link" data-lang="copy">Копировать</button>
                </div>
            </div>
        </div>
    </div>

    <div id="lock-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Блокировка заметки" data-lang-aria="lock_note">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="lock_title">Блокировка</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="lock-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <input id="lock-password" type="password" class="input-area" placeholder="Пароль" data-lang-placeholder="lock_password" autocomplete="new-password">
                <div class="row-right">
                    <button type="button" class="btn-secondary" data-action="close-modal" data-modal="lock-modal" data-lang="cancel">Отмена</button>
                    <button type="button" class="btn-primary" id="lock-apply" data-lang="apply">Применить</button>
                </div>
            </div>
        </div>
    </div>

    <div id="lock-center-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Центр защиты" data-lang-aria="lock_center">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="lock_center">Защита заметок</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="lock-center-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <p class="muted" data-lang="lock_center_desc">Тут будут фильтры скрытых заметок и быстрые действия</p>
                <div id="lock-center-empty" class="empty-placeholder hidden">
                    <i class="material-icons-round" aria-hidden="true">lock_open</i>
                    <p data-lang="lock_center_empty">Нет защищенных заметок</p>
                </div>
                <div id="lock-center-list" class="lock-center-list"></div>
                <div class="modal-actions-grid">
                    <button type="button" class="btn-secondary" data-action="close-modal" data-modal="lock-center-modal" data-lang="close">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <div id="sketch-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card full-screen-modal">
            <header class="modal-header modal-header-tight">
                <div class="row-left">
                    <h2 class="modal-title" data-lang="sketch_title">Холст</h2>
                    <input type="color" id="sketch-color-picker" value="#00f2ff" class="input-color-custom input-color-round" aria-label="Цвет кисти" data-lang-aria="sketch_color">
                    <input type="range" id="sketch-width-picker" min="1" max="20" value="3" class="range-compact" aria-label="Толщина кисти" data-lang-aria="sketch_width">
                </div>
                <div class="row-right">
                    <button type="button" class="btn-icon" data-action="sketch-undo" aria-label="Отменить штрих" data-lang-aria="sketch_undo"><i class="material-icons-round" aria-hidden="true">undo</i></button>
                    <button type="button" class="btn-icon" data-action="sketch-clear" aria-label="Очистить" data-lang-aria="sketch_clear"><i class="material-icons-round" aria-hidden="true">delete</i></button>
                    <button type="button" class="btn-icon" data-action="close-modal" data-modal="sketch-modal" aria-label="Закрыть" data-lang-aria="close"><i class="material-icons-round" aria-hidden="true">close</i></button>
                </div>
            </header>
            <div class="modal-body no-padding modal-canvas-body">
                <canvas id="sketch-canvas" class="canvas-full" style="touch-action:none;"></canvas>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn-primary" data-action="sketch-save" data-lang="insert">Вставить</button>
            </footer>
        </div>
    </div>

    <div id="photo-editor-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card full-screen-modal">
            <header class="modal-header modal-header-tight">
                <div class="row-left">
                    <h2 class="modal-title" data-lang="photo_editor">Редактор фото</h2>
                    <input type="color" id="photo-color-picker" value="#00f2ff" class="input-color-custom input-color-round" aria-label="Цвет кисти" data-lang-aria="photo_color">
                    <input type="range" id="photo-width-picker" min="1" max="20" value="3" class="range-compact" aria-label="Толщина кисти" data-lang-aria="photo_width">
                </div>
                <div class="row-right">
                    <button type="button" class="btn-icon" data-action="photo-undo" aria-label="Отменить" data-lang-aria="undo"><i class="material-icons-round" aria-hidden="true">undo</i></button>
                    <button type="button" class="btn-icon" data-action="photo-clear" aria-label="Очистить" data-lang-aria="clear"><i class="material-icons-round" aria-hidden="true">delete</i></button>
                    <button type="button" class="btn-icon" data-action="close-modal" data-modal="photo-editor-modal" aria-label="Закрыть" data-lang-aria="close"><i class="material-icons-round" aria-hidden="true">close</i></button>
                </div>
            </header>
            <div class="modal-body no-padding modal-canvas-body">
                <canvas id="photo-editor-canvas" class="canvas-full" style="touch-action:none;"></canvas>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn-primary" data-action="photo-save" data-lang="save">Сохранить</button>
            </footer>
        </div>
    </div>

    <div id="settings-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Настройки" data-lang-aria="settings">
        <div class="modal-card">
            <header class="modal-header">
                <button type="button" class="btn-icon settings-back" data-action="settings-back" aria-label="Назад" data-lang-aria="settings_back">
                    <i class="material-icons-round" aria-hidden="true">arrow_back</i>
                </button>
                <h2 id="settings-title" data-lang="settings_menu_title">Настройки</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="settings-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body" id="settings-content"></div>
        </div>
    </div>

    <div id="share-fallback-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-label="Ссылка" data-lang-aria="share_title">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="share_title">Ссылка</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="share-fallback-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <p id="share-fallback-message" class="muted" data-lang="share_invalid">Ссылка недействительна</p>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn-primary" data-action="close-modal" data-modal="share-fallback-modal" data-lang="close">Закрыть</button>
            </footer>
        </div>
    </div>

    <div id="about-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="team">Команда</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="about-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <ul class="team-list">
                    <li class="team-member name-alexandrov">Александров Арсений</li>
                    <li class="team-member name-malyshev">Малышев Егор</li>
                    <li class="team-member name-kopaev">Копаев Иван</li>
                    <li class="team-member name-minyaev">Миняев Иван</li>
                </ul>
                <div class="bot-link-wrapper">
                    <span class="bot-link-label" data-lang="contact_us">Связаться с нами:</span>
                    <a href="https://t.me/SmartNotesInfo_bot" target="_blank" rel="noopener noreferrer" class="btn-primary telegram-btn">
                        <i class="material-icons-round" aria-hidden="true">smart_toy</i>
                        @SmartNotesInfo_bot
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div id="rate-modal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-card">
            <header class="modal-header">
                <h2 data-lang="rate">Оценить</h2>
                <button type="button" class="btn-icon" data-action="close-modal" data-modal="rate-modal" aria-label="Закрыть" data-lang-aria="close">
                    <i class="material-icons-round" aria-hidden="true">close</i>
                </button>
            </header>
            <div class="modal-body">
                <div class="stars-row" aria-label="Оценка" data-lang-aria="rating_aria">
                    <i class="material-icons-round star" data-val="1">star_border</i>
                    <i class="material-icons-round star" data-val="2">star_border</i>
                    <i class="material-icons-round star" data-val="3">star_border</i>
                    <i class="material-icons-round star" data-val="4">star_border</i>
                    <i class="material-icons-round star" data-val="5">star_border</i>
                </div>
                <textarea id="feedback-text" placeholder="." data-lang-placeholder="feedback_placeholder" rows="4" class="input-area" aria-label="Ваш отзыв" data-lang-aria="feedback_aria"></textarea>
            </div>
            <footer class="modal-footer">
                <button type="button" class="btn-primary" data-action="submit-feedback" data-lang="send">Отправить</button>
            </footer>
        </div>
    </div>

    <div id="voice-indicator" class="voice-indicator" aria-hidden="true">
        <div class="pulse-ring" aria-hidden="true"></div>
        <i class="material-icons-round" aria-hidden="true">mic</i>
        <span data-lang="recording">Запись...</span>
    </div>

    <div id="toast-container" class="toast-container" aria-live="polite"></div>

    <input type="file" id="img-upload" accept="image/*" style="display:none" aria-hidden="true">
    <input type="file" id="note-import" accept=".json,application/json" style="display:none" aria-hidden="true">

</body>
</html>
